import{u as I,b as R,j as e}from"./index-BeNCzduY.js";import{r as s}from"./router-vendor-BRsksEZN.js";import{D as l}from"./DashboardCard-BAAeOnb-.js";import{T as b}from"./Table-CvVj6SmE.js";import{B as j}from"./Button-DxTX0R12.js";import{I as u}from"./Input-C8Uc0cwY.js";/* empty css                  */const W=()=>{const{user:i}=I(),n=(i==null?void 0:i.name)||"John Lender",{loans:y,offers:N,createOffer:S,approveLoan:C}=R(),[d,h]=s.useState(!1),[a,o]=s.useState({amount:"",interest:"",term:""}),[f,c]=s.useState(""),[p,x]=s.useState(""),[L,g]=s.useState(null),m=N.filter(t=>t.lender===n),r=y.filter(t=>t.approvedBy===n),v=r.filter(t=>t.status==="Active"),A=r.filter(t=>t.status==="Pending"),O=v.reduce((t,k)=>t+k.amount,0),$=()=>{if(!a.amount||!a.interest||!a.term){c("Please fill in all fields before publishing.");return}S(a,n),x(`Loan offer of $${parseFloat(a.amount).toLocaleString()} published! Borrowers can now apply.`),c(""),o({amount:"",interest:"",term:""}),h(!1),setTimeout(()=>x(""),5e3)},w=t=>{C(t,n),g(t),setTimeout(()=>g(null),3e3)},D=[{header:"ID",accessor:"id"},{header:"Amount",render:t=>`$${t.amount.toLocaleString()}`},{header:"Interest Rate",render:t=>`${t.interestRate}%`},{header:"Term",render:t=>`${t.term} months`},{header:"Status",render:()=>e.jsx("span",{className:"status-badge status-active",children:"Active"})}],P=[{header:"ID",accessor:"id"},{header:"Borrower",accessor:"borrower"},{header:"Amount",render:t=>`$${t.amount.toLocaleString()}`},{header:"Rate",render:t=>`${t.interestRate}%`},{header:"Status",render:t=>e.jsx("span",{className:`status-badge status-${t.status.toLowerCase()}`,children:t.status})},{header:"Action",render:t=>t.status==="Pending"?e.jsx("button",{className:"btn btn-outline",style:{padding:"4px 10px",fontSize:"12px"},onClick:()=>w(t.id),children:L===t.id?"âœ… Approved":"Approve"}):e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:"â€”"})}];return e.jsxs("div",{className:"dashboard-container fade-in",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Lender Dashboard"}),e.jsx("p",{className:"page-subtitle",children:"Manage your loan offers and track your borrowers"})]}),e.jsx(j,{variant:"primary",onClick:()=>{h(!d),c("")},children:d?"Cancel":"+ Create Loan Offer"})]}),p&&e.jsxs("div",{role:"alert","aria-live":"polite",style:{background:"rgba(34,197,94,0.08)",border:"1px solid rgba(34,197,94,0.4)",padding:"0.875rem 1rem",borderRadius:"8px",marginBottom:"1.25rem",color:"#22c55e",fontWeight:500,fontSize:"0.9rem"},children:["âœ… ",p]}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsx(l,{title:"Capital Deployed",value:`$${(O/1e3).toFixed(0)}k`,trend:{value:"My active loans",positive:!0},icon:"ðŸ’°"}),e.jsx(l,{title:"My Active Loans",value:v.length.toString(),label:"Performing assets",icon:"ðŸ“„"}),e.jsx(l,{title:"Pending Approvals",value:A.length.toString(),label:"Awaiting my review",icon:"â³"}),e.jsx(l,{title:"My Offers",value:m.length.toString(),label:"Published",icon:"ðŸ“‹"})]}),d&&e.jsxs("div",{className:"content-section fade-in",children:[e.jsx("div",{className:"section-header",children:e.jsx("h3",{children:"New Loan Offer"})}),f&&e.jsxs("div",{role:"alert",style:{background:"rgba(239,68,68,0.08)",border:"1px solid rgba(239,68,68,0.4)",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",color:"#ef4444",fontSize:"0.875rem"},children:["âš ï¸ ",f]}),e.jsxs("div",{className:"form-grid",children:[e.jsx(u,{label:"Amount ($)",type:"number",placeholder:"50000",value:a.amount,onChange:t=>o({...a,amount:t.target.value})}),e.jsx(u,{label:"Interest Rate (%)",type:"number",placeholder:"5.5",value:a.interest,onChange:t=>o({...a,interest:t.target.value})}),e.jsx(u,{label:"Term (Months)",type:"number",placeholder:"12",value:a.term,onChange:t=>o({...a,term:t.target.value})}),e.jsx("div",{className:"form-actions-end",children:e.jsx(j,{variant:"primary",className:"w-full",onClick:$,children:"Publish Offer"})})]})]}),e.jsxs("div",{className:"content-grid-2-1",children:[e.jsxs("div",{className:"content-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h3",{children:["My Loans (",r.length," total)"]})}),r.length===0?e.jsx("div",{className:"no-data",children:"No loans associated with your account yet. Create an offer to get started."}):e.jsx(b,{columns:P,data:r})]}),e.jsxs("div",{className:"content-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h3",{children:"My Published Offers"})}),m.length===0?e.jsx("div",{className:"no-data",children:'No offers published yet. Click "+ Create Loan Offer" to get started.'}):e.jsx(b,{columns:D,data:m,pagination:!1})]})]})]})};export{W as default};
