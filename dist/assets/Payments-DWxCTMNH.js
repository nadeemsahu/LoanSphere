import{u as f,b as g,j as e}from"./index-BeNCzduY.js";import{r as m}from"./router-vendor-BRsksEZN.js";import{T as v}from"./Table-CvVj6SmE.js";import{B as b}from"./Button-DxTX0R12.js";/* empty css                  */const M=()=>{const{user:a}=f(),n=a==null?void 0:a.name,{loans:x,transactions:h,addPayment:y}=g(),[i,o]=m.useState(null),[d,c]=m.useState(""),l=x.filter(s=>s.borrower===n&&s.status==="Active"),t=h.filter(s=>s.type==="Payment"&&s.borrower===n),p=t.reduce((s,r)=>s+r.amount,0),u=s=>{i||(o(s.id),setTimeout(()=>{const r=s.nextPaymentAmount||500;y(r,n,s.id),o(null),c(`✅ EMI payment of $${r.toLocaleString()} for Loan #${s.id} processed successfully!`),setTimeout(()=>c(""),5e3)},700))},j=[{header:"TxID",accessor:"id"},{header:"Date",accessor:"date"},{header:"Amount",render:s=>`$${s.amount.toLocaleString()}`},{header:"Type",accessor:"type"},{header:"Status",render:s=>e.jsx("span",{className:"status-badge status-success",children:s.status})}];return e.jsxs("div",{className:"dashboard-container fade-in",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"Payments & EMI"}),e.jsx("p",{className:"page-subtitle",children:"Your payment schedule and history"})]})}),d&&e.jsx("div",{role:"alert","aria-live":"polite",style:{background:"rgba(34,197,94,0.08)",border:"1px solid rgba(34,197,94,0.4)",padding:"0.875rem 1rem",borderRadius:"8px",marginBottom:"1rem",color:"#22c55e",fontWeight:500,fontSize:"0.9rem"},children:d}),l.length===0?e.jsx("div",{className:"no-data",children:"No active loans found. Apply for a loan to see EMI details here."}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:l.map(s=>e.jsxs("div",{className:"content-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h3",{children:["Loan #",s.id]}),e.jsx("span",{className:"status-badge status-active",children:"Active"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:"Outstanding"}),e.jsxs("strong",{children:["$",s.amount.toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:"Interest Rate"}),e.jsxs("strong",{children:[s.interestRate,"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:"Term"}),e.jsxs("strong",{children:[s.term," months"]})]}),e.jsx("hr",{style:{border:"none",borderTop:"1px solid var(--border)",margin:"0.25rem 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:"EMI Due"}),e.jsxs("div",{style:{fontSize:"1.4rem",fontWeight:700},children:["$",(s.nextPaymentAmount||500).toLocaleString()]})]}),e.jsx(b,{variant:"primary",onClick:()=>u(s),disabled:i===s.id,"aria-label":`Pay EMI for loan ${s.id}`,children:i===s.id?"Processing…":"Pay EMI"})]})]})]},s.id))}),e.jsxs("div",{className:"content-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h3",{children:["Payment History (",t.length,")"]}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:["Total Paid: ",e.jsxs("strong",{style:{color:"var(--text-primary)"},children:["$",p.toLocaleString()]})]})]}),t.length===0?e.jsx("div",{className:"no-data",children:"No payments recorded yet."}):e.jsx(v,{columns:j,data:t})]})]})};export{M as default};
