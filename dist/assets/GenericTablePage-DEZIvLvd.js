import{u as S,b as D,j as a}from"./index-BeNCzduY.js";import{e as R}from"./router-vendor-BRsksEZN.js";import{T as U}from"./Table-CvVj6SmE.js";/* empty css                  */const P=({title:b,type:i})=>{const{user:d}=S(),h=d==null?void 0:d.role,l=d==null?void 0:d.name,{users:f,blockUser:y,removeUser:j,addUser:w,loans:p,approveLoan:N,deleteLoan:A,offers:v,transactions:u,activity:$}=D(),x=h==="analyst",t=h==="admin",o=h==="lender";let r=[];switch(i){case"users":r=o?f.filter(e=>e.role==="borrower"):f;break;case"loans":r=o?p.filter(e=>e.approvedBy===l):p;break;case"offers":r=o?v.filter(e=>e.lender===l):v;break;case"activity":r=$;break;case"transactions":if(o){const e=p.filter(s=>s.approvedBy===l).map(s=>s.borrower);r=u.filter(s=>e.includes(s.borrower))}else r=u;break;case"payments":if(o){const e=p.filter(s=>s.approvedBy===l).map(s=>s.borrower);r=u.filter(s=>s.type==="Payment"&&e.includes(s.borrower))}else r=u.filter(e=>e.type==="Payment");break;default:r=[]}const[g,k]=R.useState(""),c=e=>{k(e),setTimeout(()=>k(""),3500)},m=(e,s)=>{x||(e==="delete"?(i==="users"&&t&&(j(s),c("User removed.")),i==="loans"&&t&&(A(s),c(`Loan #${s} deleted.`))):e==="block"&&t?(y(s),c("User status toggled.")):e==="approve"?(N(s,l),c(`✅ Loan #${s} approved!`)):e==="download"&&c("Receipt download initiated (mock)."))},C=()=>{if(!t)return;const e={name:"New User",email:`user${Date.now()}@loansphere.com`,role:"borrower",status:"Active"};w(e),c("New user added to platform.")};let n=[];switch(i){case"users":n=[{header:"ID",accessor:"id"},{header:"Name",accessor:"name"},{header:"Email",accessor:"email"},{header:"Role",render:e=>a.jsx("span",{style:{textTransform:"capitalize"},children:e.role})},{header:"Status",render:e=>a.jsx("span",{className:`status-badge status-${(e.status||"active").toLowerCase()}`,children:e.status||"Active"})},...t?[{header:"Actions",render:e=>a.jsxs("div",{style:{display:"flex",gap:"6px"},children:[a.jsx("button",{className:"btn btn-outline",style:{padding:"4px 10px",fontSize:"12px"},onClick:()=>m("block",e.id),children:e.status==="Blocked"?"Unblock":"Block"}),a.jsx("button",{className:"btn btn-outline",style:{padding:"4px 10px",fontSize:"12px",color:"#ef4444",borderColor:"#ef4444"},onClick:()=>m("delete",e.id),children:"Remove"})]})}]:[]];break;case"loans":n=[{header:"ID",accessor:"id"},{header:"Borrower",accessor:"borrower"},{header:"Amount",render:e=>`$${e.amount.toLocaleString()}`},{header:"Rate",render:e=>`${e.interestRate}%`},{header:"Status",render:e=>a.jsx("span",{className:`status-badge status-${e.status.toLowerCase()}`,children:e.status})},{header:"Date",accessor:"startDate"},...t||o?[{header:"Action",render:e=>a.jsxs("div",{style:{display:"flex",gap:"6px"},children:[e.status==="Pending"&&a.jsx("button",{className:"btn btn-outline",style:{padding:"4px 10px",fontSize:"12px"},onClick:()=>m("approve",e.id),children:"Approve"}),t&&a.jsx("button",{className:"btn btn-outline",style:{padding:"4px 10px",fontSize:"12px",color:"#ef4444",borderColor:"#ef4444"},onClick:()=>m("delete",e.id),children:"Delete"})]})}]:[]];break;case"offers":n=[{header:"ID",accessor:"id"},{header:"Amount",render:e=>`$${e.amount.toLocaleString()}`},{header:"Interest",render:e=>`${e.interestRate}%`},{header:"Term",render:e=>`${e.term} months`},{header:"Lender",accessor:"lender"},{header:"Status",render:()=>a.jsx("span",{className:"status-badge status-active",children:"Active"})}];break;case"activity":n=[{header:"Action",accessor:"action"},{header:"User",accessor:"user"},{header:"Details",accessor:"details"},{header:"Time",accessor:"time"}];break;case"transactions":case"payments":n=[{header:"TxID",accessor:"id"},{header:"Date",accessor:"date"},{header:"Amount",render:e=>`$${e.amount.toLocaleString()}`},{header:"Type",accessor:"type"},{header:"Borrower",accessor:"borrower"},{header:"Status",render:e=>a.jsx("span",{className:`status-badge status-${(e.status||"success").toLowerCase()}`,children:e.status})},...x?[]:[{header:"Receipt",render:e=>a.jsx("button",{className:"btn btn-outline",style:{padding:"4px 10px",fontSize:"12px"},onClick:()=>m("download",e.id),children:"Receipt"})}]];break;default:n=[]}const L=x?"Read-only view — no actions available":o?`Your ${b.toLowerCase()} only`:`Manage and view ${b.toLowerCase()}`;return a.jsxs("div",{className:"dashboard-container fade-in",children:[a.jsxs("div",{className:"page-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("h1",{className:"page-title",children:b}),a.jsx("p",{className:"page-subtitle",children:L})]}),i==="users"&&t&&a.jsx("button",{className:"btn btn-primary",onClick:C,children:"+ Add User"})]}),g&&a.jsx("div",{role:"alert","aria-live":"polite",style:{background:"rgba(34,197,94,0.08)",border:"1px solid rgba(34,197,94,0.4)",padding:"0.75rem 1rem",borderRadius:"8px",marginBottom:"1rem",color:"#22c55e",fontSize:"0.875rem",fontWeight:500},children:g}),a.jsx("div",{className:"content-section",children:r.length===0?a.jsx("div",{className:"no-data",children:"No records found."}):a.jsx(U,{columns:n,data:r})})]})};export{P as default};
